#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Case sensitivity guard - basic frontend build check
echo "üîç Checking for case-sensitive import issues..."
cd frontend && npm run build:ci --if-present
cd ..

# CodeRabbit CLI review (automatic - runs if authenticated)
echo ""
echo "üê∞ Running CodeRabbit CLI review..."
if command -v coderabbit >/dev/null 2>&1; then
  if coderabbit auth status >/dev/null 2>&1; then
    echo "‚úÖ CodeRabbit authenticated - running review..."
    coderabbit review --prompt-only || echo "‚ö†Ô∏è  CodeRabbit review had issues, continuing..."
  else
    echo "‚ö†Ô∏è  CodeRabbit not authenticated. Run: npm run coderabbit:login"
  fi
else
  echo "‚ö†Ô∏è  CodeRabbit CLI not installed. Skipping..."
fi

echo ""
echo "‚úÖ Pre-commit checks passed!"