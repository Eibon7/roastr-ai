# CodeRabbit Review #3315788870 - Planning Document

**Review URL:** <https://github.com/Eibon7/roastr-ai/pull/499#pullrequestreview-3315788870>
**Date:** 2025-10-08
**PR:** #499 - GDD Phase 15.1: Coverage Integrity Enforcement
**Status:** Planning
**Priority:** MAJOR (Invalid commands + Documentation quality)

---

## Executive Summary

CodeRabbit Review #3315788870 identified **7 issues** across planning documentation and changelog:

- **2 Major Issues:** Invalid grep pattern + Stray parenthesis in command
- **5 Nit Issues:** Provenance metadata, timestamp unification, markdown linting (MD040, MD036)

**Impact:**
- Major issues prevent successful execution of documented commands
- Nit issues affect documentation quality, auditability, and maintainability
- Most issues are in planning documents (documentation-only)

**Fix Strategy:**
- Phase 1: Fix Major issues (grep pattern + command syntax)
- Phase 2: Fix Nit issues (markdown linting)
- Phase 3: Document deferred enhancements (provenance, timestamps)
- Phase 4: Validate and create test evidence

---

## Estado Actual (Assessment - Phase 0)

### Assessment Type: Simple (Orchestrator Inline)

**Criteria Count:** 7 issues (2 Major command errors, 5 Nit)
**Issue Type:** Documentation quality + Command correctness
**Complexity:** Low - syntax fixes + markdown improvements

### Files Analyzed

1. **docs/plan/review-3315523695.md**
   - **Issues:** Invalid grep pattern (lines 447-451)
   - **Status:** ❌ NEEDS FIX (Major)

2. **docs/plan/review-3315616952.md**
   - **Issues:** Stray parenthesis (line 592-594), MD040 (lines 245, 252, 660, 876), MD036 (lines 711, 731, 752, 925, 934, 944, 960)
   - **Status:** ❌ NEEDS FIXES (1 Major, multiple Nit)

3. **docs/plan/review-3315336900.md**
   - **Issues:** MD036 (lines 290, 297)
   - **Status:** ❌ NEEDS FIXES (Nit)

4. **docs/auto-repair-changelog.md**
   - **Issues:** Provenance metadata (multiple entries), Timestamp unification (multiple entries)
   - **Status:** ⚠️ ENHANCEMENT SUGGESTIONS (Deferred)

### Tests Executed

```bash
# 1. Test grep pattern (current - broken)
grep -n "^**Coverage:**" docs/nodes/multi-tenant.md
# Expected: Error (invalid regex)

# 2. Test grep pattern (fixed)
grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md
# Expected: Works correctly

# 3. Test command with extra parenthesis
# Copy-paste from docs would fail due to stray ")"
```

### Recommendation: FIX (Major) + Document Enhancements (Nit)

**Reasoning:**
- Major issues prevent command execution
- Nit issues improve documentation quality (easy fixes)
- Provenance/timestamp enhancements require script changes (defer)

---

## 1. Análisis de Comentarios

### Por Severidad

#### Critical Issues (🔴)
None.

#### Major Issues (🟠)

##### Issue 1: Invalid Grep Pattern - Review #3315523695

**File:** `docs/plan/review-3315523695.md`
**Lines:** 447-451
**Severity:** Major (🟠)
**Type:** Documentation - Command Error
**Category:** Code Quality

**CodeRabbit Comment:**
> **Fix grep pattern: use -F or escape asterisks.**
>
> The pattern `^**Coverage:**` is invalid regex. Use fixed-string grep or escape `*`.

**Root Cause:**
The grep pattern `"^**Coverage:**"` uses unescaped asterisks, which grep interprets as regex quantifiers. This causes "Invalid preceding regular expression" error.

**Evidence:**
```bash
# Current (BROKEN):
$ grep -n "^**Coverage:**" docs/nodes/multi-tenant.md
grep: Invalid preceding regular expression

# Fixed (Option 1 - Fixed string):
$ grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md
8:**Coverage:** 0%

# Fixed (Option 2 - Escaped):
$ grep -n '^\\*\\*Coverage:\\*\\*' docs/nodes/multi-tenant.md
8:**Coverage:** 0%
```

**Location in File:**
```markdown
# Line 447-451 (current - broken):
```bash
grep -n "^**Coverage:**" docs/nodes/multi-tenant.md
# Expected: Only 1 match at line 8

# Validate node
node scripts/validate-gdd-runtime.js --node=multi-tenant
```
```

**Impact:**
- **Severity:** Major - Command fails when copy-pasted
- **User Impact:** Cannot validate Coverage field counts
- **Credibility:** Documentation contains non-functional commands

**Fix (Recommended - Option 1 with -F):**
```diff
-grep -n "^**Coverage:**" docs/nodes/multi-tenant.md
+grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md
```

**Rationale:**
- `-F` (fixed string) is explicit and readable
- No escaping complexity
- Same result as escaped version but simpler

---

##### Issue 2: Stray Parenthesis in Command - Review #3315616952

**File:** `docs/plan/review-3315616952.md`
**Lines:** 592-594
**Severity:** Major (🟠)
**Type:** Documentation - Command Syntax Error
**Category:** Code Quality

**CodeRabbit Comment:**
> **Fix stray parenthesis in command snippet.**
>
> There's an extra trailing ")" which will break copy/paste execution.

**Root Cause:**
Command line copied from a shell substitution context but left the closing parenthesis in the documentation.

**Evidence:**
```bash
# Current (BROKEN - line 592-594):
grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1)
#                                                                                ^
#                                                                          Stray ")"

# This command would fail:
$ grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1)
bash: syntax error near unexpected token ')'

# Fixed:
grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1
```

**Location Context:**
The command appears in a CI sync check example showing how to extract the health score from markdown.

**Impact:**
- **Severity:** Major - Command fails when executed
- **User Impact:** Copy-paste breaks shell execution
- **Confusion:** Users think the documented approach is wrong

**Fix:**
```diff
-grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1)
+grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1
```

---

#### Minor Issues
None.

#### Nit Issues (🔵)

##### Issue 3: Provenance Metadata in auto-repair-changelog.md

**File:** `docs/auto-repair-changelog.md`
**Lines:** Multiple entries (9-12, 26-29, 43-46, 60-63, etc.)
**Severity:** Nit (🔵)
**Type:** Enhancement - Auditability
**Category:** Architecture

**CodeRabbit Comment:**
> **Provenance boost: include commit SHA and workflow run URL.**
>
> Add the Git commit SHA and CI run URL per entry to improve auditability and cross-referencing with PR annotations.

**Current Format:**
```markdown
## 2025-10-08T16:10:35.980Z

**Repair ID:** 2025-10-08T16:10:35Z
**Triggered by:** CI/CD
**Nodes affected:** multi-tenant, trainer
```

**Suggested Enhancement:**
```markdown
## 2025-10-08T16:10:35.980Z

**Repair ID:** 2025-10-08T16:10:35Z
**Triggered by:** CI/CD
**Commit:** a3422410
**Workflow Run:** https://github.com/Eibon7/roastr-ai/actions/runs/123456
**PR:** #499
**Nodes affected:** multi-tenant, trainer
```

**Analysis:**

**Benefits:**
- Improved traceability to specific CI runs
- Easy cross-referencing with GitHub Actions
- Better audit trail for compliance

**Implementation Required:**
- Modify `scripts/auto-repair-gdd.js` to accept additional parameters:
  - `--commit-sha` (from `git rev-parse HEAD`)
  - `--workflow-run` (from `$GITHUB_SERVER_URL/$GITHUB_REPOSITORY/actions/runs/$GITHUB_RUN_ID`)
  - `--pr-number` (from `$GITHUB_REF` or context)
- Update changelog template to include these fields
- Update CI workflow to pass these parameters

**Complexity:** Medium (script changes + CI integration)

**Decision:** DEFER
- Out of scope for documentation-only review
- Create separate issue: "Enhancement: Add provenance metadata to auto-repair changelog"
- Priority: P3 (nice to have)

---

##### Issue 4: Timestamp Unification in auto-repair-changelog.md

**File:** `docs/auto-repair-changelog.md`
**Lines:** Multiple entries (13-17, 30-34, 47-51, etc.)
**Severity:** Nit (🔵)
**Type:** Enhancement - Consistency
**Category:** Architecture

**CodeRabbit Comment:**
> **Unify backup folder timestamp with the entry's base timestamp.**
>
> Backup paths use different milliseconds than the header/Repair ID, implying multiple Date sources. Capture a single timestamp per entry and derive header, Repair ID, and backup folder name from that one value for perfect correlation.

**Current Format:**
```markdown
## 2025-10-08T16:10:35.980Z      # Header timestamp (ms precision)

**Repair ID:** 2025-10-08T16:10:35Z    # Repair ID (seconds precision)
...
**Backup:** `/tmp/gdd-auto-repair-backups/2025-10-08T16-10-35-788Z`
#                                                                ^^^
#                                                          Different ms!
```

**Issue:**
The backup folder timestamp (`788Z`) doesn't match the header timestamp (`980Z`), indicating multiple `Date.now()` calls create slight timing differences.

**Root Cause:**
Script calls `new Date()` at different points:
1. Start of script: `2025-10-08T16:10:35.788Z` (backup folder)
2. End of script: `2025-10-08T16:10:35.980Z` (report header)

**Suggested Fix:**
```javascript
// In auto-repair-gdd.js:
const runTimestamp = new Date(); // Capture once at start

// Use everywhere:
const header = runTimestamp.toISOString(); // 2025-10-08T16:10:35.788Z
const repairId = runTimestamp.toISOString().split('.')[0] + 'Z'; // 2025-10-08T16:10:35Z
const backupFolder = runTimestamp.toISOString().replace(/:/g, '-').replace(/\\..*/, ''); // 2025-10-08T16-10-35
```

**Benefits:**
- Perfect timestamp correlation across all fields
- Easier to trace backup folders to specific runs
- No ambiguity about timing

**Implementation Required:**
- Refactor `scripts/auto-repair-gdd.js` to capture timestamp once
- Ensure all derived formats use the same base timestamp

**Complexity:** Low (simple refactor)

**Decision:** DEFER
- Out of scope for documentation-only review
- Create separate issue: "Enhancement: Unify timestamps in auto-repair changelog"
- Priority: P3 (nice to have)

---

##### Issue 5: MD040 Violations - review-3315616952.md

**File:** `docs/plan/review-3315616952.md`
**Lines:** 245, 252, 660, 876
**Severity:** Nit (🔵)
**Type:** Documentation - Markdown Linting
**Category:** Style

**CodeRabbit Comment:**
> **Add language tags to fenced code blocks (MD040).**
>
> Specify languages for these fences to satisfy markdownlint and improve readability (e.g., text, bash, diff).

**Evidence:**
```markdown
# Current (line 245):
```
Some output or text
```

# Fixed:
```text
Some output or text
```
```

**Locations:**
- Line 245: Output block (needs `text`)
- Line 252: Command output (needs `text`)
- Line 660: Code snippet (needs `bash` or `text`)
- Line 876: Output block (needs `text`)

**Fix Strategy:**
Read each location, determine appropriate language tag:
- Bash commands: `bash`
- Plain output: `text`
- Commit messages: `text`
- Config files: appropriate lang (yaml, json, etc.)

**Success Criteria:**
- 0 MD040 violations in review-3315616952.md
- All fenced blocks have language tags

---

##### Issue 6: MD036 Violations - review-3315616952.md + review-3315336900.md

**File:** `docs/plan/review-3315616952.md` (lines 711, 731, 752, 925, 934, 944, 960)
**File:** `docs/plan/review-3315336900.md` (lines 290, 297)
**Severity:** Nit (🔵)
**Type:** Documentation - Markdown Linting
**Category:** Style

**CodeRabbit Comment:**
> **Convert bold titles to headings and fix heading increments (MD036/MD001).**
>
> Promote emphasized section labels to proper headings and keep level progression consistent.

**Evidence:**
```markdown
# Current:
**Test 1: Markdown Linting**
...content...

# Fixed:
#### Test 1: Markdown Linting
...content...
```

**Locations in review-3315616952.md:**
- Line 711: `**Section Title**`
- Line 731: `***Subsection***`
- Line 752: `**Another Section**`
- Line 925: `**Test 2: …**`
- Line 934: `**Test 3: …**`
- Line 944: `**Test 4: …**`
- Line 960: `**Test 5: …**`

**Locations in review-3315336900.md:**
- Line 290: `**Phase X: …**`
- Line 297: `**Test X: …**`

**Fix Strategy:**
Convert all bold section titles to `####` headings (level 4 appropriate for these subsections).

**Success Criteria:**
- 0 MD036 violations in both files
- Proper heading hierarchy maintained

---

## 2. Diseño GDD

### Nodos Afectados

**Primary Nodes:** None (documentation-only changes)

**Context:**
- All changes are in planning documents
- No GDD node files affected
- No code changes
- No edges affected
- No architectural impact

**Validation:**
- ✅ No code changes
- ✅ No node files modified
- ✅ No spec.md changes needed
- ✅ Documentation quality improvements only

---

## 3. Subagentes a Usar

### For All Issues:
- **Documentation Agent** (inline) - Fix command syntax, markdown linting

**Rationale:**
All actionable issues are documentation fixes. No specialized agents needed.

---

## 4. Archivos Afectados

### Modified Files

#### 1. docs/plan/review-3315523695.md

**Issues:** 1 (Invalid grep pattern)
**Change Type:** Command syntax fix
**Impact:** Command will execute correctly
**Lines Modified:** 447-451

**Expected Changes:**
```diff
@@ -447,7 +447,7 @@
 ```bash
-grep -n "^**Coverage:**" docs/nodes/multi-tenant.md
+grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md
 # Expected: Only 1 match at line 8

 # Validate node
```

---

#### 2. docs/plan/review-3315616952.md

**Issues:** 2 (Stray parenthesis), 5 (MD040), 6 (MD036 - 7 occurrences)
**Change Type:** Command syntax + markdown linting
**Impact:** Commands work, markdown quality improved
**Lines Modified:** 245, 252, 592-594, 660, 711, 731, 752, 876, 925, 934, 944, 960

**Expected Changes:**
```diff
# Issue 2 (Line 592-594):
-grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1)
+grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1

# Issue 5 (MD040 - lines 245, 252, 660, 876):
-```
+```text

# Issue 6 (MD036 - lines 711, 731, 752, 925, 934, 944, 960):
-**Test 1: Markdown Linting**
+#### Test 1: Markdown Linting
```

---

#### 3. docs/plan/review-3315336900.md

**Issues:** 6 (MD036 - 2 occurrences)
**Change Type:** Markdown linting
**Impact:** Markdown quality improved
**Lines Modified:** 290, 297

**Expected Changes:**
```diff
@@ -290 +290 @@
-**Phase X: …**
+#### Phase X: …

@@ -297 +297 @@
-**Test X: …**
+#### Test X: …
```

---

#### 4. docs/auto-repair-changelog.md

**Issues:** 3 (Provenance), 4 (Timestamp unification)
**Status:** NO CHANGES (Enhancements deferred)
**Rationale:** Require script changes, out of scope

---

### No Files Created

All fixes are modifications to existing planning documents.

---

## 5. Estrategia de Implementación

### Orden de Aplicación

**Priority Order:**
1. Major Issues (1, 2) - Fix command errors first
2. Nit Issues (5, 6) - Fix markdown linting
3. Document Deferred Enhancements (3, 4) - Create GitHub issues

---

### Phase 1: Fix Major Issues

#### Issue 1: Invalid Grep Pattern

**File:** `docs/plan/review-3315523695.md`
**Action:** Add `-F` flag to grep command

**Implementation:**
```bash
# Use Edit tool to fix line 447
# Change: grep -n "^**Coverage:**"
# To:     grep -n -F "**Coverage:**"
```

**Verification:**
```bash
# Extract and test the fixed command
grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md
# Expected: 8:**Coverage:** 0%
```

---

#### Issue 2: Stray Parenthesis

**File:** `docs/plan/review-3315616952.md`
**Action:** Remove trailing `)`

**Implementation:**
```bash
# Use Edit tool to fix line 592-594
# Remove the stray ")" at end of line
```

**Verification:**
```bash
# Copy-paste command from fixed docs
grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1
# Expected: Works correctly, outputs "93.8"
```

---

### Phase 2: Fix Nit Issues (Markdown Linting)

#### Issue 5: MD040 Violations

**File:** `docs/plan/review-3315616952.md`
**Lines:** 245, 252, 660, 876

**Implementation:**
1. Read each location to understand context
2. Add appropriate language tag:
   - Plain text output: `text`
   - Commands: `bash`
   - Code: appropriate language

**Verification:**
```bash
npx markdownlint-cli2 docs/plan/review-3315616952.md | grep MD040
# Expected: 0 violations
```

---

#### Issue 6: MD036 Violations

**Files:**
- `docs/plan/review-3315616952.md` (7 occurrences)
- `docs/plan/review-3315336900.md` (2 occurrences)

**Implementation:**
Convert all `**Section Title**` to `#### Section Title`

**Pattern:**
```bash
# Find all bold section titles
grep -n "^\*\*[A-Z]" docs/plan/review-3315616952.md
grep -n "^\*\*[A-Z]" docs/plan/review-3315336900.md
```

**Verification:**
```bash
npx markdownlint-cli2 docs/plan/review-3315616952.md docs/plan/review-3315336900.md | grep MD036
# Expected: 0 violations
```

---

### Phase 3: Document Deferred Enhancements

**Issue 3: Provenance Metadata**
- Create GitHub issue
- Title: "Enhancement: Add provenance metadata to auto-repair changelog"
- Priority: P3
- Labels: enhancement, documentation

**Issue 4: Timestamp Unification**
- Create GitHub issue
- Title: "Enhancement: Unify timestamps in auto-repair changelog"
- Priority: P3
- Labels: enhancement, refactor

---

### Phase 4: Validation

**Full Documentation Validation:**
```bash
# 1. Markdown linting
npx markdownlint-cli2 "docs/plan/*.md"
# Expected: 0 MD040 and MD036 violations in affected files

# 2. Test fixed commands
grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md
# Expected: Works

grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1
# Expected: Works

# 3. Verify no broken commands
# Check that all commands in planning docs are syntactically valid
```

---

### Phase 5: Create Test Evidence

**Evidence Files:**
```bash
docs/test-evidence/review-3315788870/
├── SUMMARY.md                  # Comprehensive report
├── validation-final.txt        # Markdown linting output
├── command-tests.txt           # Command execution tests
└── diff-summary.txt            # Git diff summary
```

---

### Phase 6: Commit and Push

**Commit Message:**
```text
docs: Apply CodeRabbit Review #3315788870 - Fix command syntax + markdown quality

### Issues Addressed

**Major (2):**
- [Major] Invalid grep pattern: added -F flag (review-3315523695.md:447-451)
- [Major] Stray parenthesis: removed from command (review-3315616952.md:592-594)

**Nit (4):**
- [Nit] MD040 violations: added language tags to fenced blocks (review-3315616952.md:245,252,660,876)
- [Nit] MD036 violations: converted bold to headings (review-3315616952.md:711,731,752,925,934,944,960 + review-3315336900.md:290,297)

**Deferred (2):**
- [Nit] Provenance metadata: Create issue #TBD (requires script changes)
- [Nit] Timestamp unification: Create issue #TBD (requires script changes)

### Changes

**Documentation Quality:**
- Fixed 2 major command errors (grep pattern + stray parenthesis)
- Resolved 4 markdown linting violations (MD040, MD036)
- Deferred 2 enhancements requiring script changes

**Impact:**
- All documented commands now execute correctly
- Markdown quality improved (linting passes)
- No production code affected

### Testing

```bash
# Validation
grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md     # Works
grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1  # Works
npx markdownlint-cli2 docs/plan/review-3315616952.md     # 0 MD040/MD036 violations
```

### GDD Impact

**Nodes:** None (documentation-only)
**spec.md:** No changes needed
**Validation:** ✅ All command tests passing

### Evidence

- docs/test-evidence/review-3315788870/SUMMARY.md
- docs/test-evidence/review-3315788870/command-tests.txt
- docs/test-evidence/review-3315788870/validation-final.txt

### Files Modified

**Modified (3):**
- docs/plan/review-3315523695.md (+1/-1 line)
- docs/plan/review-3315616952.md (+13/-13 lines)
- docs/plan/review-3315336900.md (+2/-2 lines)

**Created (1):**
- docs/plan/review-3315788870.md (planning document)

**Total:** 4 files affected (+16/-16 lines)

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

---

## 6. Criterios de Éxito

### Must Have (Blocking)

- ✅ Issue 1: Grep pattern uses `-F` flag
- ✅ Issue 2: Stray parenthesis removed
- ✅ All documented commands execute without errors
- ✅ Markdown linting: 0 MD040 violations in affected files
- ✅ Markdown linting: 0 MD036 violations in affected files
- ✅ Full validation suite passing

### Should Have (Quality)

- ✅ GitHub issues created for deferred enhancements (Issues 3, 4)
- ✅ Comprehensive test evidence created
- ✅ All commands tested and verified working

### Nice to Have (Future)

- ⏸️ Issue 3: Provenance metadata implementation
- ⏸️ Issue 4: Timestamp unification implementation

---

## 7. Testing Strategy

### Unit Tests

**N/A** - No code changes, documentation only

### Integration Tests

**N/A** - No code changes, documentation only

### Documentation Tests

**Test 1: Grep Pattern Validation**
```bash
# Test the fixed grep command
grep -n -F "**Coverage:**" docs/nodes/multi-tenant.md
# Expected: 8:**Coverage:** 0%

grep -n -F "**Coverage:**" docs/nodes/trainer.md
# Expected: 8:**Coverage:** 0%
```

**Test 2: Command Syntax Validation**
```bash
# Test the fixed command (no stray parenthesis)
MD_SCORE=$(grep -m1 "Average Score:" docs/system-health.md | awk '{print $3}' | cut -d'/' -f1)
echo "Score: $MD_SCORE"
# Expected: Score: 93.8
```

**Test 3: Markdown Linting**
```bash
# Test MD040 violations are fixed
npx markdownlint-cli2 docs/plan/review-3315616952.md | grep MD040
# Expected: 0 violations

# Test MD036 violations are fixed
npx markdownlint-cli2 docs/plan/review-3315616952.md docs/plan/review-3315336900.md | grep MD036
# Expected: 0 violations
```

**Test 4: Command Execution (All Documented Commands)**
```bash
# Extract all bash commands from planning docs and verify they're syntactically valid
# (manual inspection or automated script)
```

---

## 8. Risk Analysis

### Low Risk (All Issues)

**Rationale:**
- All changes are in planning documents
- No production code affected
- No GDD nodes modified
- No architectural changes
- Easy to verify (command testing + linting)
- Easy to rollback if needed

### Mitigation

- **Backup:** Git version control (can revert commit)
- **Validation:** Command testing + markdown linting
- **Evidence:** Full test evidence documentation

---

## 9. Rollback Plan

**If Issues Arise:**
```bash
# Revert commit
git revert HEAD

# Or reset to previous commit
git reset --hard HEAD~1

# Force push if already pushed
git push --force origin feat/gdd-phase-15.1-coverage-integrity
```

**Rollback Triggers:**
- Commands still don't work after fixes
- Markdown linting fails after fixes
- Unexpected side effects discovered

---

## 10. Deferred Issues - GitHub Issue Templates

### Issue 3: Provenance Metadata

**Title:** Enhancement: Add provenance metadata to auto-repair changelog

**Description:**
```markdown
## Enhancement Request

Add Git commit SHA and workflow run URL to auto-repair changelog entries for improved auditability and cross-referencing.

### Current Format
```markdown
## 2025-10-08T16:10:35.980Z
**Repair ID:** 2025-10-08T16:10:35Z
**Triggered by:** CI/CD
```

### Proposed Format
```markdown
## 2025-10-08T16:10:35.980Z
**Repair ID:** 2025-10-08T16:10:35Z
**Triggered by:** CI/CD
**Commit:** a3422410
**Workflow Run:** https://github.com/Eibon7/roastr-ai/actions/runs/123456
**PR:** #499
```

### Implementation
- Modify `scripts/auto-repair-gdd.js` to accept `--commit-sha`, `--workflow-run`, `--pr-number` parameters
- Update changelog template
- Update `.github/workflows/gdd-repair.yml` to pass these parameters

### Benefits
- Improved traceability to specific CI runs
- Easy cross-referencing with GitHub Actions
- Better audit trail

### Priority
P3 (Nice to have)
```

**Labels:** enhancement, documentation, good-first-issue

---

### Issue 4: Timestamp Unification

**Title:** Enhancement: Unify timestamps in auto-repair changelog

**Description:**
```markdown
## Enhancement Request

Capture timestamp once at script start and derive all timestamp formats from that single value for perfect correlation.

### Current Issue
Backup folder timestamp doesn't match report header timestamp, indicating multiple Date.now() calls:
- Header: `2025-10-08T16:10:35.980Z`
- Backup: `/tmp/gdd-auto-repair-backups/2025-10-08T16-10-35-788Z`

### Proposed Fix
```javascript
const runTimestamp = new Date(); // Capture once at start

const header = runTimestamp.toISOString();
const repairId = runTimestamp.toISOString().split('.')[0] + 'Z';
const backupFolder = runTimestamp.toISOString().replace(/:/g, '-').replace(/\\..*/, '');
```

### Implementation
Refactor `scripts/auto-repair-gdd.js` to capture timestamp once and use everywhere.

### Benefits
- Perfect timestamp correlation
- Easier to trace backup folders to specific runs
- No timing ambiguity

### Priority
P3 (Nice to have)
```

**Labels:** enhancement, refactor, good-first-issue

---

## 11. Timeline Estimate

**Phase 1: Major Issues** - 10 minutes
- Fix grep pattern (1 location)
- Fix stray parenthesis (1 location)

**Phase 2: Nit Issues (Markdown)** - 15 minutes
- Fix MD040 violations (4 locations)
- Fix MD036 violations (9 locations)

**Phase 3: Validation** - 10 minutes
- Test commands
- Run markdown linting
- Verify fixes

**Phase 4: Evidence** - 10 minutes
- Create test evidence files
- Document results

**Phase 5: Deferred Issues** - 5 minutes
- Document GitHub issue templates in planning doc
- (Actual issue creation can be done post-merge)

**Phase 6: Commit & Push** - 5 minutes
- Stage changes
- Commit with detailed message
- Push to remote

**Total Estimated Time:** ~55 minutes

---

## 12. Success Metrics

**Quantitative:**
- ✅ 2 Major issues fixed (100%)
- ✅ 2 Nit issues fixed (markdown linting)
- ✅ 2 Nit issues documented (deferred enhancements)
- ✅ 0 Command execution errors
- ✅ 0 MD040 violations (in affected files)
- ✅ 0 MD036 violations (in affected files)

**Qualitative:**
- ✅ All documented commands work correctly
- ✅ Documentation is syntactically correct
- ✅ Markdown quality improved
- ✅ No production code affected
- ✅ Zero risk of regressions
- ✅ Clear path for future enhancements (deferred issues)

---

## Appendix A: Issue Summary Table

| # | Severity | Type | File | Lines | Description |
|---|----------|------|------|-------|-------------|
| 1 | Major | Command Error | review-3315523695.md | 447-451 | Invalid grep pattern (unescaped asterisks) |
| 2 | Major | Command Syntax | review-3315616952.md | 592-594 | Stray parenthesis in command |
| 3 | Nit | Enhancement | auto-repair-changelog.md | Multiple | Provenance metadata (deferred) |
| 4 | Nit | Enhancement | auto-repair-changelog.md | Multiple | Timestamp unification (deferred) |
| 5 | Nit | Markdown (MD040) | review-3315616952.md | 245,252,660,876 | Missing language tags |
| 6 | Nit | Markdown (MD036) | review-3315616952.md | 7 locations | Bold instead of headings |
| 6 | Nit | Markdown (MD036) | review-3315336900.md | 290,297 | Bold instead of headings |

**Total:** 7 issues (2 Major, 5 Nit)
**Actionable:** 4 issues (2 Major, 2 Nit)
**Deferred:** 2 issues (Nit enhancements)

---

## Appendix B: Command Reference

**Before vs After:**

| Issue | Before (Broken) | After (Fixed) |
|-------|----------------|---------------|
| #1 | `grep -n "^**Coverage:**"` | `grep -n -F "**Coverage:**"` |
| #2 | `... \| cut -d'/' -f1)` | `... \| cut -d'/' -f1` |

---

**Created by:** Orchestrator Agent
**Date:** 2025-10-08
**Review ID:** 3315788870
**Status:** READY FOR IMPLEMENTATION
